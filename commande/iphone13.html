<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FWMarket | iPhone 13</title>
    <link rel="stylesheet" href="css/commande.css">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="shortcut icon" href="../images/FM_miniLogo.png" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Shippori+Antique&display=swap" rel="stylesheet">
</head>

<body>
    <header>
        <nav class="nav">
            <input type="checkbox" id="navCheckbox" class="navCheckbox">
            <label for="navCheckbox" class="navToggle">
                <img class="menuIcon" src="../images/Hamburger_icon.svg" alt="hamburger menu icon"/>
                <img class="closeIcon" src="../images/cross_icon.png" alt="cross menu icon" />
            </label>

            <ul class="nav-menu">
                <li class="nav-item-logo">
                    <a href="../index.html" class="nav-link">
                        <img src="../images/FM_Logo.png" id="logo" alt="Logo du site" />
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../telephones.html" class="nav-link">
                        <span class="nav-title">Téléphones</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../pc.html" class="nav-link">
                        <span class="nav-title">Ordinateurs</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../apropos.html" class="nav-link">
                        <span class="nav-title">À Propos</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../panier.html" class="nav-link">
                        <span class="nav-title">Panier</span><span id="nbPanier">(0)</span>
                    </a>
                </li>
            </ul>
        </nav>
    </header>

    <main>
        <h1>>> Commandez un iPhone 13</h1>
        <div class="container">
            <form method="get">
                <div class="phoneInfo_container">
                    <div class="couleur">
                        <label class="select-label" for="couleur-select">Couleur : </label>
                        <select name="selectionCouleur" id="couleur-select">
                            <option value="Noir">Minuit</option>
                            <option value="Gris">Gris Sidéral</option>
                            <option value="Blanc">Lumière Stellaire</option>
                            <option value="Or">Or</option>
                        </select>
                    </div>
                    <div class="modele">
                        <label class="select-label" for="modele-select">Modèle : </label>
                        <select class="selecteur" name="selectionModele" id="modele-select">
                            <option value="iPhone 13 Mini">iPhone 13 Mini</option>
                            <option value="iPhone 13">iPhone 13</option>
                            <option value="iPhone 13 Pro">iPhone 13 Pro</option>
                            <option value="iPhone 13 Pro Max">iPhone 13 Pro Max</option>
                        </select>
                    </div>
                    <div class="stockage">
                        <label class="select-label" for="stockage-select">Stockage : </label>
                        <select class="selecteur" name="selectionStockage" id="stockage-select">
                            <option value="128Go">128Go</option>
                            <option value="256Go">256Go</option>
                            <option value="512Go">512Go</option>
                            <option value="1To">1To</option>
                        </select>
                    </div>
                </div>
                <div class="assurance">
                    <input type="checkbox" class="selecteur" id="assuranceFW" name="assuranceTW">
                    <label for="assuranceFW">Souscrire à une assurance ForwardMarket+*</label>
                </div>
                <div class="valider">
                    <button type="button" id="btn-ajout" >Ajouter au panier</button>
                </div>
            </form>
            <div class="phoneprix">
                <img src="../images/iphone13.png" alt="Image iPhone 13"/>
                <p id="prix">Prix :</p><p id="prixchange">809€</p>
            </div>
        </div>
        <div id="container-confirm">

        </div>
    </main>

    <div class="others-bottom">
        <p>
            *L'assurance ForwardMarket+ permet de remplacer votre téléphone en cas d'accident ou de défaillance technique (valable pour deux incidents maximum). Elle est valable deux ans à partir de la réception de la réception de la commande et n'est pas remboursable
            une fois souscrite. Prix : 109.99€ TTC.
        </p>
    </div>

    <footer>
        <p>Copyright © 2021 | ForwardMarket Corporation. Tous droits réservés</p>
    </footer>

    <script>
        function ajouterConfirmation() {
            let assuranceFW;
            let str_stockage;
            let str_modele;
            let str_couleur;
            const div_confirm = document.getElementById('container-confirm');
            if (div_confirm.children.length === 0) { //Vérifie si la div n'a pas déjà été remplie
                //Ajoute un titre h1
                const h1_confirm = document.createElement("H1");
                const t_h1_confirm = document.createTextNode(">> Cet article a été ajouté au panier");
                h1_confirm.appendChild(t_h1_confirm);
                div_confirm.appendChild(h1_confirm);

                //Récupération des infos du formulaire
                const couleur_select = document.getElementById('couleur-select');
                str_couleur = couleur_select.options[couleur_select.selectedIndex].text;
                const modele_select = document.getElementById('modele-select');
                str_modele = modele_select.options[modele_select.selectedIndex].text;
                const stockage_select = document.getElementById('stockage-select');
                str_stockage = stockage_select.options[stockage_select.selectedIndex].text;

                assuranceFW = document.querySelector('#assuranceFW').checked; //Return true or false
                console.log(assuranceFW);

                //Création du tableau
                const table_confirm = document.createElement('table');
                table_confirm.id = "article";

                const thead = document.createElement('thead');
                const tr_thead = document.createElement('tr');
                const tr_th_modele_fixed = document.createElement('th');
                tr_th_modele_fixed.textContent = "Modèle";
                const tr_th_couleur_fixed = document.createElement('th');
                tr_th_couleur_fixed.textContent = "Couleur";
                const tr_th_stockage_fixed = document.createElement('th');
                tr_th_stockage_fixed.textContent = "Stockage";
                const tr_th_assurance_fixed = document.createElement('th');
                tr_th_assurance_fixed.textContent = "Assurance FW+";
                const tr_th_quantite_fixed = document.createElement('th');
                tr_th_quantite_fixed.textContent = "Quantité";

                const tbody = document.createElement('tbody');
                const tr_tbody = document.createElement('tr');
                tr_tbody.id = "second";
                const tr_td_modele = document.createElement('td');
                tr_td_modele.textContent = str_modele;
                const tr_td_couleur = document.createElement('td');
                tr_td_couleur.textContent = str_couleur;
                const tr_td_stockage = document.createElement('td');
                tr_td_stockage.textContent = str_stockage;
                const tr_td_assurance = document.createElement('td');
                if (assuranceFW) {
                    tr_td_assurance.textContent = "✅";
                } else {
                    tr_td_assurance.textContent = "❌";
                }
                const tr_td_quantite = document.createElement('td');
                tr_td_quantite.textContent = "1";


                tr_thead.appendChild(tr_th_modele_fixed);
                tr_thead.appendChild(tr_th_couleur_fixed);
                tr_thead.appendChild(tr_th_stockage_fixed);
                tr_thead.appendChild(tr_th_assurance_fixed);
                tr_thead.appendChild(tr_th_quantite_fixed);
                thead.appendChild(tr_thead);
                table_confirm.appendChild(thead);


                tr_tbody.appendChild(tr_td_modele);
                tr_tbody.appendChild(tr_td_couleur);
                tr_tbody.appendChild(tr_td_stockage);
                tr_tbody.appendChild(tr_td_assurance);
                tr_tbody.appendChild(tr_td_quantite);
                tbody.appendChild(tr_tbody);
                table_confirm.appendChild(tbody);

                div_confirm.appendChild(table_confirm);
            }
            else {
                //Récupération des infos du formulaire
                const couleur_select = document.getElementById('couleur-select');
                str_couleur = couleur_select.options[couleur_select.selectedIndex].text;
                const modele_select = document.getElementById('modele-select');
                str_modele = modele_select.options[modele_select.selectedIndex].text;
                const stockage_select = document.getElementById('stockage-select');
                str_stockage = stockage_select.options[stockage_select.selectedIndex].text;

                assuranceFW = document.querySelector('#assuranceFW').checked; //Return true or false


                const tr_tbody = document.createElement('tr');
                const tr_td_modele = document.createElement('td');
                tr_td_modele.textContent = str_modele;
                const tr_td_couleur = document.createElement('td');
                tr_td_couleur.textContent = str_couleur;
                const tr_td_stockage = document.createElement('td');
                tr_td_stockage.textContent = str_stockage;
                const tr_td_assurance = document.createElement('td');
                if (assuranceFW) {
                    tr_td_assurance.textContent = "✅";
                } else {
                    tr_td_assurance.textContent = "❌";
                }
                const tr_td_quantite = document.createElement('td');
                tr_td_quantite.textContent = "1";

                tr_tbody.appendChild(tr_td_modele);
                tr_tbody.appendChild(tr_td_couleur);
                tr_tbody.appendChild(tr_td_stockage);
                tr_tbody.appendChild(tr_td_assurance);
                tr_tbody.appendChild(tr_td_quantite);


                const second = document.getElementById("second");
                second.innerHTML = tr_tbody.innerHTML;
            }
        }

        document.getElementById('btn-ajout').onclick = function() {
            ajouterConfirmation();
        }
    </script>
    <script src="../js/script.js"></script>
    <script src="js/commande.js"></script>
</body>

</html>